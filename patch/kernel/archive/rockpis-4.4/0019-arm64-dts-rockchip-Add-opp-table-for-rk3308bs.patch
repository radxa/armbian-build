From 8e8f84ebea3d1df16d7c37a05e627c416f2e5360 Mon Sep 17 00:00:00 2001
From: Finley Xiao <finley.xiao@rock-chips.com>
Date: Tue, 10 Aug 2021 09:33:05 +0800
Subject: [PATCH 19/30] arm64: dts: rockchip: Add opp table for rk3308bs

Change-Id: I4dfb21c982884ba7e8f3397f9512c200a50831e5
Signed-off-by: Finley Xiao <finley.xiao@rock-chips.com>
Reviewed-on: https://10.10.10.29/c/rk/kernel-stable/+/135073
Reviewed-by: Hans Yang <yhx@rock-chips.com>
Tested-by: Hans Yang <yhx@rock-chips.com>
---
 arch/arm64/boot/dts/rockchip/rk3308.dtsi | 64 ++++++++++++++++++++++++++++++++
 1 file changed, 64 insertions(+)

diff --git a/arch/arm64/boot/dts/rockchip/rk3308.dtsi b/arch/arm64/boot/dts/rockchip/rk3308.dtsi
index 8a98886..0095bf3 100644
--- a/arch/arm64/boot/dts/rockchip/rk3308.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3308.dtsi
@@ -148,6 +148,53 @@
 		};
 	};
 
+	rk3308bs_cpu0_opp_table: rk3308bs-cpu0-opp-table {
+		compatible = "operating-points-v2";
+		opp-shared;
+
+		rockchip,temp-hysteresis = <5000>;
+		rockchip,low-temp = <0>;
+		rockchip,low-temp-min-volt = <900000>;
+		rockchip,max-volt = <1200000>;
+		rockchip,low-temp-adjust-volt = <
+			/* MHz    MHz    uV */
+			   0      1200   50000
+		>;
+		rockchip,thermal-zone = "soc-thermal";
+
+		rockchip,evb-irdrop = <25000>;
+		nvmem-cells = <&cpu_leakage>;
+		nvmem-cell-names = "leakage";
+
+		opp-408000000 {
+			opp-hz = /bits/ 64 <408000000>;
+			opp-microvolt = <825000 825000 1200000>;
+			clock-latency-ns = <40000>;
+			opp-suspend;
+		};
+		opp-600000000 {
+			opp-hz = /bits/ 64 <600000000>;
+			opp-microvolt = <850000 850000 1200000>;
+			clock-latency-ns = <40000>;
+		};
+		opp-816000000 {
+			opp-hz = /bits/ 64 <816000000>;
+			opp-microvolt = <950000 950000 1200000>;
+			clock-latency-ns = <40000>;
+		};
+		opp-1008000000 {
+			opp-hz = /bits/ 64 <1008000000>;
+			opp-microvolt = <1075000 1075000 1200000>;
+			clock-latency-ns = <40000>;
+		};
+		opp-1200000000 {
+			opp-hz = /bits/ 64 <1200000000>;
+			opp-microvolt = <1200000 1200000 1200000>;
+			clock-latency-ns = <40000>;
+			status = "disabled";
+		};
+	};
+
 	arm-pmu {
 		compatible = "arm,cortex-a53-pmu";
 		interrupts = <GIC_SPI 83 IRQ_TYPE_LEVEL_HIGH>,
@@ -206,6 +253,23 @@
 		};
 	};
 
+	rk3308bs_dmc_opp_table: rk3308bs-dmc-opp-table {
+		compatible = "operating-points-v2";
+
+		opp-394000000 {
+			opp-hz = /bits/ 64 <394000000>;
+			opp-microvolt = <900000>;
+		};
+		opp-452000000 {
+			opp-hz = /bits/ 64 <452000000>;
+			opp-microvolt = <900000>;
+		};
+		opp-590000000 {
+			opp-hz = /bits/ 64 <590000000>;
+			opp-microvolt = <900000>;
+		};
+	};
+
 	fiq_debugger: fiq-debugger {
 		compatible = "rockchip,fiq-debugger";
 		rockchip,serial-id = <2>;
-- 
2.7.4

